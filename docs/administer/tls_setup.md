# TLS support for Percona Everest

The Percona Everest server now supports Transport Layer Security (TLS)  for all incoming connections. TLS **encrypts** client and server communication. This keeps data safe from being **intercepted or changed**. Administrators can configure server certificates and private keys to enable **secure HTTPS access** to the Everest API server. This strengthens security for production environments.

!!! note
    - When TLS is enabled, the default server port (8080) will only accept `https` traffic, and `http` traffic will be rejected.
- We do not support redirects from `http` to `https`.
- Generally, it is advisable to configure TLS at the **Load Balancer** or **Ingress level**.


## TLS setup with Percona Everest

!!! info "Important"
    This section provides an example using **Helm**. You can also use the provided options with the Percona Everest CLI by using the flag `â€”helm.set`.


=== "Cert-manager (recommended)"
     
     ### Use cert-manager

     **Pre-requisites**

     Ensure that [cert-manager](https://cert-manager.io/docs/) has been deployed in your infrastructure.

    Here are the steps to set up the Percona Everest server using cert-manager:
    {.power-number}

    1. Install cert-manager:

    ```sh
    kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.17.0/cert-manager.yaml
    ```

    For alternative installation methods, refer to the [documentation](https://cert-manager.io/docs/installation/).

    2. Create a Self-Signed issuer:


        ```sh
        apiVersion: cert-manager.io/v1
        kind: ClusterIssuer
        metadata:
        name: test-selfsigned
        spec:
        selfSigned: {}
        ```
  
    This will create a `ClusterIssuer` named `test-selfsigned ` that can issue certificates using a self-signed method, without the need for an external Certificate Authority (CA).

    !!! note
        Self-signed issuers are not recommended for production use. We are using a self-signed issuer for simplicity. You can configure additional types of issuers; see the [documentation](https://cert-manager.io/docs/configuration/issuers/) for details.

    3. Create a configuration file named `values.yaml`:

        ```sh
        server:
	      tls: 
		    enabled: true
		    certificate:
			create: true
			domain: example.com
			issuer:
				group: cert-manager.io
				kind: ClusterIssuer 
				name: test-selfsigned
        ```


    4. Install Percona Everest:

        ```sh
        helm install everest-core percona/everest --create-namespace \
	-n everest-system \
	--set server.tls.enabled=true \
	-f values.yaml
        ```


=== "Self-signed certificates"
    ### Use self-signed certificates

     Use self-signed certificates (automatically generated by the Percona Everest server):
     

    ```sh
    helm install everest-core percona/everest --create-namespace \
	-n everest-system \
	--set server.tls.enabled=true
    ```

=== "Custom certificates"

    ### Configure TLS with Custom certificates

        Here are the steps to set up the Percona Everest server using Custom certificates:
        {.power-number}

    1. Create a configuration file named `values.yaml`:

        ```sh
        server:
        tls: 
            enabled: true
            secret:
                certs:
                    tls.key: YOUR_PRIVATE_KEY_FILE
                    tls.crt: YOUR_CERTIFICATE_FILE
        ```

2. To install Percona Everest with your custom certificates, use the following command:

    ```sh
    helm install everest-core percona/everest --create-namespace \
  -n everest-system \
  --set server.tls.enabled=true \
  -f values.yaml
    ```





























    
    
  






